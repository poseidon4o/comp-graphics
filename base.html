<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="base.js"></script>
	<script type="text/javascript">
	var f;


	function bresenham(x0, y0, x1, y1) {
		var dx = Math.abs(x1 - x0), sx = x0 < x1 ? 1 : -1;
		var dy = Math.abs(y1 - y0), sy = y0 < y1 ? 1 : -1;
		var err = (dx>dy ? dx : -dy)/2;

		while (true) {
			f.fillPixel(x0,y0);
			if (x0 === x1 && y0 === y1) break;
			var e2 = err;
			if (e2 > -dx) {
				err -= dy;
				x0 += sx;
			}
			if (e2 < dy) {
				err += dx;
				y0 += sy;
			}
		}
	}


	function init () {
		f = new DrawField(200, 120, 5, "canvas");
		var posx = 0, posy = 0;



		setInterval(function() {
			if (++posx == f.resX) {
				posx = 0;
				if(++posy == f.resY) {
					posy = 0;
				}
			}

			f.clear();
			bresenham(0, 0, posx, posy);
			f.drawGrid();
		}, 3);

	}

	</script>
</head>
<body onload="init()">
<canvas id="canvas"></canvas>
</body>
</html>
